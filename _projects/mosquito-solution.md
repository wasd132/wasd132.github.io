---
layout: project
title: "태양광 기반 세종시 모기 퇴치 솔루션"
summary: "태양광과 Raspberry PI, Yolov5를 활용한 해충 방제 프로젝트입니다. 특정 위치에 말라리아등의 매개가 되는 모기가 다량 발생 시 이를 탐지하여 방제에 도움이 될 수 있도록 합니다."
image: assets/images/mobile-landscape.jpg
technologies: [Yolov5, Python, Raspberry PI]
github:
categories: ml
---

## 프로젝트 배경

매년 여름 세종시를 포함한 중부 지역에서 말라리아 매개 모기가 대량 발생하여 시민 건강을 위협합니다. 기존 방제 방식은 광범위한 살충제 살포에 의존하여 환경 문제가 발생하고, 모기 발생 지점을 실시간으로 파악하기 어려워 비효율적이었습니다. 이를 해결하기 위해 태양광으로 독립 전원을 확보하고, Raspberry Pi에 YOLOv5 모델을 배포하여 현장에서 실시간으로 모기를 탐지·모니터링하는 AI 기반 정밀 해충 방제 시스템을 설계했습니다.

## 주요 기능

### 1. 해충 실시간 탐지
YOLOv5 모델을 Raspberry Pi에 배포하여 모기 발생 지역을 실시간으로 모니터링합니다. 카메라 모듈로 영상을 캡처하고, 엣지 디바이스에서 직접 추론을 수행하여 모기를 탐지·카운팅합니다. Raspberry Pi 환경에 맞춰 모델 경량화(Pruning, Quantization)를 적용하여 추론 속도와 정확도 간 균형을 최적화했습니다.

### 2. 태양광 전력 공급
외부 전원 인프라 없이 독립적으로 운영할 수 있도록 태양광 패널 기반 전력 시스템을 구축했습니다. 태양광 패널 → 배터리 충전 → Raspberry Pi 전력 공급의 구조로, 전원 접근이 어려운 야외 환경(하천변, 숲 등)에도 장기 설치가 가능합니다.

### 3. 발생 알림 시스템
특정 임계값 이상으로 모기가 탐지되면 관리 서버로 알림을 전송합니다. 방제 담당자가 발생 지점과 규모를 즉시 파악하여, 필요한 지역에만 선별적으로 방제를 수행할 수 있도록 합니다.

### 4. 모니터링 대시보드
탐지 데이터를 시각화하여 모기 발생 현황을 한눈에 파악할 수 있는 대시보드를 제공합니다. 시간대별 탐지 추이, 설치 지점별 발생량, 임계값 초과 이력 등을 확인할 수 있습니다.

## 시스템 구조

```
태양광 패널 → 배터리 충전 → Raspberry Pi 전력 공급
                              ├── 카메라 모듈 → 실시간 영상 캡처
                              ├── YOLOv5 추론 → 해충 탐지/카운팅
                              ├── 임계값 초과 시 → 서버 알림 전송
                              └── 탐지 데이터 → 대시보드 시각화
```

## 담당 업무

컴퓨터공학과, 경영학과, 전자공학과 등 다양한 학과의 팀원으로 구성된 융합 프로젝트에서 **모델링 인프라 구축**, **데이터 어노테이션 및 학습 모델 제작**, **Raspberry Pi AI 모듈 연동·통신 테스트**, **대시보드 제작**을 담당했으며, 학과 간 협업 조율 역할도 수행했습니다.

### 1. 모델링 인프라 구축

YOLOv5 모델을 Raspberry Pi에서 실행하기 위한 전체 학습·배포 파이프라인을 구축했습니다. 데스크톱 환경에서 학습한 모델을 엣지 디바이스에 최적화하여 배포하는 과정까지의 인프라를 설계했습니다.

**구체적 사례:**
- 학습 환경으로 GPU 서버에 YOLOv5 학습 파이프라인을 구성하고, 모기 이미지 데이터셋의 전처리(리사이즈, 정규화) → 학습 → 검증 → 모델 내보내기까지의 워크플로우를 자동화했습니다.
- Raspberry Pi의 제한된 연산 자원(CPU 전용, RAM 제약)에서 실시간 추론이 가능하도록 **모델 경량화(Pruning, Quantization)** 를 적용했습니다. 원본 모델 대비 추론 속도를 개선하면서도 탐지 정확도의 하락을 최소화하는 최적 지점을 실험을 통해 확인했습니다.
- 학습 완료된 가중치 파일(`.pt`)을 Raspberry Pi에 배포하고, Python 스크립트로 카메라 모듈 입력 → YOLOv5 추론 → 결과 출력까지의 엔드투엔드 파이프라인이 정상 동작하는 것을 검증했습니다.

### 2. 데이터 어노테이션 및 학습 모델 제작

모기 탐지에 특화된 커스텀 YOLOv5 모델을 만들기 위해, 학습 데이터를 직접 수집·라벨링하고 모델을 반복 학습시켜 성능을 개선했습니다.

**구체적 사례:**
- 모기 트랩 카메라에서 촬영된 이미지를 수집하고, 어노테이션 도구를 사용하여 모기 개체별 바운딩 박스를 라벨링했습니다. 모기의 크기가 매우 작고 배경과 구분이 어려운 경우가 많아, 라벨링 기준(최소 픽셀 크기, 겹침 처리 방법 등)을 사전에 정의하여 일관성을 확보했습니다.
- YOLO 형식(클래스 번호 + 정규화된 xywh 좌표)으로 어노테이션을 내보내고, train/val 데이터셋을 분할하여 학습에 활용했습니다.
- 학습 에폭과 배치 사이즈, 이미지 크기 등 하이퍼파라미터를 조정하며 반복 학습을 수행하여, 모기 탐지에 최적화된 모델 가중치를 확보했습니다. 학습 과정에서 mAP(mean Average Precision)를 기준으로 성능을 모니터링하고, 과적합 여부를 검증했습니다.

### 3. Raspberry Pi AI 모듈 연동 및 통신 테스트

학습된 모델을 Raspberry Pi에 실제 배포하고, 카메라 모듈·태양광 전원·서버 통신까지 전체 하드웨어-소프트웨어 연동을 테스트했습니다. 특히 **전자공학과 팀원들과 협업**하여 태양광 전원 회로 설계와 AI 소프트웨어 간의 시스템 이식 작업을 진행했습니다.

**구체적 사례:**
- Raspberry Pi에 카메라 모듈을 연결하고, OpenCV로 실시간 프레임을 캡처한 뒤 YOLOv5 추론을 수행하는 파이프라인을 구현했습니다. 프레임 드롭 없이 안정적으로 추론이 실행되도록 캡처 주기와 추론 간격을 조정했습니다.
- 전자공학과 팀원이 설계한 태양광 충전 회로와 Raspberry Pi를 연결하는 과정에서, 전원 불안정(전압 강하)으로 인한 추론 중단 문제가 발생했습니다. 전자과 팀원과 함께 전원부 출력 사양을 확인하고, AI 소프트웨어 측에서 배터리 잔량에 따라 추론 주기를 동적으로 조절하는 전력 관리 로직을 구현하여 하드웨어-소프트웨어 간 안정성을 확보했습니다.
- 탐지 결과(모기 수, 타임스탬프, 위치 정보)를 관리 서버로 전송하는 통신 모듈을 테스트했습니다. 네트워크 불안정 환경(야외 WiFi/LTE)을 고려하여 전송 실패 시 로컬에 데이터를 버퍼링해 두었다가 연결 복구 시 재전송하는 로직을 검증했습니다.

### 4. 대시보드 제작

방제 담당자가 모기 발생 현황을 실시간으로 모니터링할 수 있는 웹 기반 대시보드를 제작했습니다.

**구체적 사례:**
- Raspberry Pi에서 전송된 탐지 데이터를 서버에서 수집하고, 시간대별 모기 탐지 추이를 그래프로 시각화했습니다. 설치 지점별 발생량을 한눈에 비교할 수 있는 요약 화면을 구성했습니다.
- 임계값 초과 이력을 테이블로 표시하여, 언제·어디서·얼마나 모기가 대량 발생했는지 이력을 추적할 수 있도록 했습니다. 방제 담당자가 이 데이터를 기반으로 선별적 방제 계획을 수립할 수 있도록 데이터 내보내기 기능도 제공했습니다.
- 대시보드에서 각 Raspberry Pi 디바이스의 연결 상태, 배터리 잔량, 마지막 데이터 수신 시각을 확인할 수 있도록 디바이스 상태 모니터링 패널을 추가하여, 장비 이상 발생 시 빠르게 대응할 수 있게 했습니다.

### 5. 다학제 팀 협업 및 일정 조율

컴퓨터공학과(AI/소프트웨어), 전자공학과(하드웨어/전원 회로), 경영학과(사업 기획/발표) 등 서로 다른 전공의 팀원들이 모였기 때문에, 각 학과의 작업 방식과 일정을 조율하는 것이 프로젝트 성공의 핵심이었습니다.

**구체적 사례:**
- 경영학과 팀원이 사업 기획서와 발표 자료를 준비하는 일정과, 개발팀의 프로토타입 완성 일정이 맞지 않아 발표 자료에 실제 동작 데모를 포함하지 못할 위기가 있었습니다. 경영과 팀원과 주간 일정 조율 미팅을 진행하여, 핵심 기능(모기 탐지 데모)을 우선 완성하는 방향으로 개발 우선순위를 재조정하고, 발표 2일 전까지 데모 영상을 확보하여 기획서에 반영할 수 있었습니다.
- 전자공학과 팀원이 태양광 충전 회로와 방수 케이싱을 제작하는 동안, 소프트웨어 개발이 먼저 완료되어 유휴 시간이 발생하는 문제가 있었습니다. 이 기간을 활용하여 모델 추가 학습과 대시보드 기능 보완을 진행하고, 하드웨어 완성 즉시 시스템 이식에 돌입할 수 있도록 통합 테스트 시나리오를 사전에 준비했습니다.
- 학과별 전문 용어와 작업 범위의 차이로 의사소통에 어려움이 있었지만, 각 미팅에서 작업 결과물을 시각적으로(회로 사진, 화면 캡처, 탐지 결과 이미지) 공유하는 방식을 도입하여 비전공자도 진행 상황을 직관적으로 이해할 수 있게 했습니다.

## 기술 스택

- **YOLOv5** — 모기 탐지 커스텀 모델 학습, 모델 경량화(Pruning, Quantization)
- **Python + OpenCV** — 카메라 프레임 캡처, 이미지 전처리, 추론 파이프라인
- **Raspberry Pi** — 엣지 디바이스 (카메라 모듈, 태양광 전원 연동, 현장 배치)
